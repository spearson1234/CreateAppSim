<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lamu Translator with LE TG Icon Logo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap"
    rel="stylesheet"
  />
  <style>
    body {
      font-family: "Fira Mono", monospace;
      background-color: #0f0f1a;
      color: #e0f7fa;
      min-height: 100vh;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow-x: hidden;
    }
    /* Scrollbar styling for textarea and sidebar */
    textarea::-webkit-scrollbar,
    #sidebar::-webkit-scrollbar,
    #sidebar .admin-content::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }
    textarea::-webkit-scrollbar-thumb,
    #sidebar::-webkit-scrollbar-thumb,
    #sidebar .admin-content::-webkit-scrollbar-thumb {
      background-color: #ff4d94cc;
      border-radius: 10px;
      box-shadow: 0 0 8px #ff4d94cc;
      border: 2px solid #0f0f1a;
    }
    textarea::-webkit-scrollbar-track,
    #sidebar::-webkit-scrollbar-track,
    #sidebar .admin-content::-webkit-scrollbar-track {
      background: #1a0a1a;
      border-radius: 10px;
    }
    /* Firefox scrollbar */
    textarea,
    #sidebar,
    #sidebar .admin-content {
      scrollbar-width: thin;
      scrollbar-color: #ff4d94cc #1a0a1a;
    }
    /* Icon logo container */
    .icon-logo {
      width: 48px;
      height: 48px;
      background: radial-gradient(circle at center, #ff4d94 0%, #660033 80%);
      border-radius: 12px;
      box-shadow: 0 0 20px #ff4d94cc;
      display: flex;
      justify-content: center;
      align-items: center;
      user-select: none;
      flex-shrink: 0;
      font-weight: 900;
      font-family: "Fira Mono", monospace;
      color: #ff4d94;
      text-shadow:
        0 0 6px #ff4d94cc,
        0 0 10px #ff1a66cc;
      letter-spacing: -0.05em;
      font-size: 1.75rem;
      line-height: 1;
    }
    /* Sidebar backdrop */
    #sidebarBackdrop {
      background-color: rgba(0, 0, 0, 0.6);
      position: fixed;
      inset: 0;
      z-index: 40;
      display: none;
    }
    #sidebarBackdrop.active {
      display: block;
    }
    /* Sidebar */
    #sidebar {
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      width: 280px;
      background: #1a001a;
      box-shadow: 2px 0 15px #ff4d94cc;
      transform: translateX(-300px);
      transition: transform 0.3s ease-in-out;
      z-index: 50;
      display: flex;
      flex-direction: column;
      padding: 1.5rem 1rem;
      overflow-y: auto;
    }
    #sidebar.active {
      transform: translateX(0);
    }
    #sidebar h2 {
      color: #ff4d94;
      font-weight: 700;
      font-family: "Fira Mono", monospace;
      font-size: 1.5rem;
      margin-bottom: 1.5rem;
      user-select: none;
      text-align: center;
      text-shadow:
        0 0 6px #ff4d94cc,
        0 0 10px #ff1a66cc;
    }
    #sidebar button.close-btn {
      align-self: flex-end;
      background: transparent;
      border: none;
      color: #ff4d94;
      font-size: 1.5rem;
      cursor: pointer;
      margin-bottom: 1rem;
      transition: color 0.2s ease;
    }
    #sidebar button.close-btn:hover {
      color: #ff1a66;
    }
    #sidebar .admin-content {
      flex: 1;
      color: #f8cce7;
      font-family: "Fira Mono", monospace;
      font-size: 1rem;
      overflow-y: auto;
    }
    #sidebar .admin-content label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #ff4d94;
    }
    #sidebar .admin-content input[type="password"] {
      width: 100%;
      padding: 0.5rem;
      border-radius: 0.5rem;
      border: 2px solid #ff4d9450;
      background-color: #33001a;
      color: #ff4d94;
      font-family: "Fira Mono", monospace;
      font-size: 1rem;
      outline: none;
      transition: border-color 0.3s ease;
    }
    #sidebar .admin-content input[type="password"]:focus {
      border-color: #ff4d94;
      box-shadow: 0 0 10px #ff4d94cc;
    }
    #sidebar .admin-content button {
      margin-top: 1rem;
      width: 100%;
      background-color: #ff4d94;
      color: #33001a;
      font-weight: 700;
      padding: 0.5rem;
      border-radius: 0.75rem;
      cursor: pointer;
      font-family: "Fira Mono", monospace;
      font-size: 1rem;
      box-shadow: 0 0 15px #ff4d94cc;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }
    #sidebar .admin-content button:hover {
      background-color: #ff1a66;
      box-shadow: 0 0 20px #ff1a66cc;
    }
    #sidebar .admin-content .admin-panel {
      margin-top: 1rem;
      border-top: 1px solid #ff4d9450;
      padding-top: 1rem;
      user-select: text;
      color: #f8cce7;
      max-height: 60vh;
      overflow-y: auto;
    }
    #sidebar .admin-content .admin-panel table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }
    #sidebar .admin-content .admin-panel th,
    #sidebar .admin-content .admin-panel td {
      border: 1px solid #ff4d9450;
      padding: 0.4rem 0.6rem;
      text-align: left;
      vertical-align: top;
    }
    #sidebar .admin-content .admin-panel th {
      background-color: #660033;
      color: #ff4d94;
      font-weight: 700;
      user-select: none;
    }
    #sidebar .admin-content .admin-panel td {
      color: #f8cce7;
      word-break: break-word;
    }
    /* Hamburger button */
    #hamburgerBtn {
      position: fixed;
      top: 1rem;
      left: 1rem;
      z-index: 60;
      background: transparent;
      border: none;
      color: #ff4d94;
      font-size: 2rem;
      cursor: pointer;
      display: none;
      user-select: none;
      transition: color 0.2s ease;
    }
    #hamburgerBtn:hover {
      color: #ff1a66;
    }
    /* Show hamburger only on mobile */
    @media (max-width: 640px) {
      #hamburgerBtn {
        display: block;
      }
      main {
        max-width: 100vw;
        height: 100vh;
        padding: 5rem 1.5rem 1.5rem 1.5rem;
        box-sizing: border-box;
        overflow-y: auto;
      }
    }
    /* On larger screens, sidebar is hidden but admin panel can appear as modal */
    @media (min-width: 641px) {
      #hamburgerBtn {
        display: none;
      }
      #sidebar {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) translateX(-300px);
        width: 400px;
        max-height: 80vh;
        border-radius: 1rem;
        box-shadow: 0 0 30px #ff4d94cc;
        transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        opacity: 0;
        overflow-y: auto;
        background: #1a001a;
      }
      #sidebar.active {
        transform: translate(-50%, -50%) translateX(0);
        opacity: 1;
      }
      #sidebarBackdrop {
        display: none !important;
      }
    }
  </style>
</head>
<body>
  <button id="hamburgerBtn" aria-label="Open admin panel menu" aria-haspopup="true" aria-controls="sidebar" aria-expanded="false">
    <i class="fas fa-bars"></i>
  </button>

  <aside id="sidebar" role="dialog" aria-modal="true" aria-labelledby="sidebarTitle" tabindex="-1" aria-hidden="true">
    <button class="close-btn" aria-label="Close admin panel menu">&times;</button>
    <h2 id="sidebarTitle">Admin Panel</h2>
    <div class="admin-content">
      <form id="adminLoginForm" autocomplete="off">
        <label for="adminPassword">Enter Password</label>
        <input type="password" id="adminPassword" name="adminPassword" aria-required="true" autocomplete="new-password" />
        <button type="submit">Submit</button>
      </form>
      <div class="admin-panel" id="adminPanelContent" style="display:none;" tabindex="0" aria-live="polite" aria-label="Admin panel content">
        <table>
          <thead>
            <tr>
              <th>Lamu Word</th>
              <th>English Meaning</th>
            </tr>
          </thead>
          <tbody id="adminWordsTableBody">
            <!-- Filled by JS -->
          </tbody>
        </table>
      </div>
    </div>
  </aside>

  <main
    class="w-full max-w-lg bg-gradient-to-br from-[#1a1a2e] to-[#121224] rounded-3xl shadow-[0_0_30px_#ff4d94cc] p-8 flex flex-col"
  >
    <header class="flex items-center justify-center gap-3 mb-6 select-none">
      <div class="icon-logo" aria-label="LE icon logo" role="img" title="LE icon logo" aria-hidden="true" style="">
        LE
      </div>
      <h1 class="text-3xl font-extrabold text-pink-400 text-center">
        Lamu → English Translator
      </h1>
    </header>

    <label class="sr-only" for="lamuInput">Lamu phrase input</label>
    <textarea
      class="w-full bg-[#33001a] text-pink-300 border-2 border-pink-400/30 rounded-xl p-4 text-lg resize-none placeholder-pink-300 focus:outline-none focus:border-pink-400 focus:shadow-[0_0_10px_#ff4d94cc] transition-colors"
      id="lamuInput"
      placeholder="Type your Lamu phrase here..."
      rows="5"
      aria-describedby="charCount"
      maxlength="200"
    ></textarea>
    <div class="mt-1 text-right text-pink-300 text-sm select-none" id="charCount" aria-live="polite" aria-atomic="true">0 / 200 characters</div>

    <section class="mt-6 flex flex-col gap-4">
      <button
        aria-label="Speak Lamu phrase aloud"
        class="flex items-center justify-center gap-2 bg-pink-400 text-[#33001a] font-semibold rounded-xl px-6 py-3 shadow-[0_0_15px_#ff4d94cc] hover:bg-pink-500 hover:shadow-[0_0_20px_#ff1a66cc] transition-all"
        id="speakBtn"
      >
        <i class="fas fa-volume-up"></i> Speak
      </button>
      <div
        aria-atomic="true"
        aria-live="polite"
        class="bg-[#33001a] border border-pink-400/20 rounded-xl p-4 text-pink-100 text-lg min-h-[6rem] select-text break-words"
        id="englishOutput"
        role="region"
      >
        Translation appears here...
      </div>
    </section>

    <p class="mt-6 text-center text-pink-300 text-sm italic select-none">
      Try phrases like
      <span class="font-semibold text-pink-400">"daboo flunka"</span> or
      <span class="font-semibold text-pink-400">"è suva"</span>
    </p>
  </main>

  <script>
    const dictionary = {
      daboo: "David",
      flunka: "stinks",
      miba: "sister",
      jibber: "funny",
      grobby: "mean",
      doveli: "fucking",
      bab: "really",
      boi: "?",
      tow: "yes",
      dinka: "bastard",
      kel: "head",
      niko: "Niko",
      su: "'s",
      glin: "shiny",
      bruv: "bold",
      è: "I",
      suva: "am better",
      den: "do",
      tu: "you",
      zo: "like",
      pengon: "penguins",
      mocob: "mum",
      dola: "dad",
      atta: "also",
      en: "as",
      end: "and",
      kow: "is",
    };

    const input = document.getElementById("lamuInput");
    const output = document.getElementById("englishOutput");
    const speakBtn = document.getElementById("speakBtn");
    const charCount = document.getElementById("charCount");

    function translate(text) {
      if (!text.trim()) return "Translation appears here...";
      const words = text.trim().toLowerCase().split(/\s+/);
      const translated = words.map((word) => {
        const clean = word.replace(/[^a-z0-9éèó]/gi, "");
        return dictionary[clean] || word;
      });
      return translated.join(" ");
    }

    input.addEventListener("input", () => {
      output.textContent = translate(input.value);
      charCount.textContent = `${input.value.length} / 200 characters`;
    });

    speakBtn.addEventListener("click", () => {
      const text = input.value.trim();
      if (!text) return;
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = "en-US";
      utterance.rate = 0.95;
      speechSynthesis.speak(utterance);
    });

    speakBtn.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") {
        e.preventDefault();
        speakBtn.click();
      }
    });

    // Sidebar toggle
    const hamburgerBtn = document.getElementById("hamburgerBtn");
    const sidebar = document.getElementById("sidebar");
    const sidebarBackdrop = document.getElementById("sidebarBackdrop");

    function openSidebar() {
      sidebar.classList.add("active");
      sidebar.setAttribute("aria-hidden", "false");
      if (sidebarBackdrop) sidebarBackdrop.classList.add("active");
      hamburgerBtn.setAttribute("aria-expanded", "true");
      sidebar.focus();
    }
    function closeSidebar() {
      sidebar.classList.remove("active");
      sidebar.setAttribute("aria-hidden", "true");
      if (sidebarBackdrop) sidebarBackdrop.classList.remove("active");
      hamburgerBtn.setAttribute("aria-expanded", "false");
      hamburgerBtn.focus();
      resetAdminPanel();
    }

    hamburgerBtn.addEventListener("click", openSidebar);
    if (sidebarBackdrop) sidebarBackdrop.addEventListener("click", closeSidebar);

    const closeBtn = sidebar.querySelector("button.close-btn");
    closeBtn.addEventListener("click", closeSidebar);

    // Admin panel logic
    const adminLoginForm = document.getElementById("adminLoginForm");
    const adminPasswordInput = document.getElementById("adminPassword");
    const adminPanelContent = document.getElementById("adminPanelContent");
    const adminWordsTableBody = document.getElementById("adminWordsTableBody");

    function resetAdminPanel() {
      adminLoginForm.style.display = "block";
      adminPanelContent.style.display = "none";
      adminPasswordInput.value = "";
      adminWordsTableBody.innerHTML = "";
    }

    function populateAdminTable() {
      adminWordsTableBody.innerHTML = "";
      const entries = Object.entries(dictionary).sort((a, b) => a[0].localeCompare(b[0]));
      for (const [lamu, eng] of entries) {
        const tr = document.createElement("tr");
        const tdLamu = document.createElement("td");
        tdLamu.textContent = lamu;
        const tdEng = document.createElement("td");
        tdEng.textContent = eng;
        tr.appendChild(tdLamu);
        tr.appendChild(tdEng);
        adminWordsTableBody.appendChild(tr);
      }
    }

    adminLoginForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const password = adminPasswordInput.value.trim();
      if (password === "Flunka") {
        adminLoginForm.style.display = "none";
        adminPanelContent.style.display = "block";
        populateAdminTable();
        adminPanelContent.focus();
      } else {
        alert("Incorrect password. Try again.");
        adminPasswordInput.value = "";
        adminPasswordInput.focus();
      }
    });

    // Trap focus inside sidebar when open for accessibility
    sidebar.addEventListener("keydown", (e) => {
      if (e.key === "Tab") {
        const focusableElements = sidebar.querySelectorAll(
          'a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])'
        );
        const firstElement = focusableElements[0];
        const lastElement = focusableElements[focusableElements.length - 1];

        if (e.shiftKey) {
          if (document.activeElement === firstElement) {
            e.preventDefault();
            lastElement.focus();
          }
        } else {
          if (document.activeElement === lastElement) {
            e.preventDefault();
            firstElement.focus();
          }
        }
      }
      if (e.key === "Escape") {
        closeSidebar();
      }
    });
  </script>
</body>
</html>
